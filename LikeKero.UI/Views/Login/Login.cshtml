@model UserLoginRequestVM
@using LikeKero.UI.ViewModels;

@{
    Layout = "~/Views/Shared/_BlankLayout.cshtml";
    ViewBag.Title = "Login";

    string LoginPageText = ViewBag.loginPageText;


    var versionName = Context.Session.GetString("SessionVersionName");
    string sessionVersion = versionName == null ? "" : Newtonsoft.Json.JsonConvert.DeserializeObject<string>(versionName);
    string imgPath = string.IsNullOrEmpty(sessionVersion) ? "" : "/" + sessionVersion;

    var footer = Context.Session.GetString("SessionFooterText");
    string footerText = versionName == null ? "" : Newtonsoft.Json.JsonConvert.DeserializeObject<string>(footer);
}

<script src="~/js/MD5.js"></script>
<body class="LoginBg">

    <form asp-action="Login" asp-controller="Login" id="frmLogin">
        <input type='hidden' name='ReturnUrl' value='@ViewBag.ReturnUrl' />
        @Html.HiddenFor(x => x.Salt)


        <!--Login Updated Page--->
        <div class="retailHeight">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="loginMainWrapper">
                            <div class="loginContent">
                                <div class="loginBg">
                                    <div class="loginHeader">
                                        <img src='@Url.Content("~/Images"+imgPath+"/main-logo.png")' class="img-responsive" />
                                        <h2>
                                            @*Welcome to Cardinal Health <br /> Compliance Management Service*@
                                            @Html.Raw(LoginPageText)
                                        </h2>
                                    </div>
                                    <div class="loginInnerBg">
                                        <div class="form-group">
                                            <label for="" class="lblText">Username</label>
                                            <input type="text" asp-for="EmailAddress" class="form-control" placeholder="Username / Email Address" tabindex="1" />
                                            <span asp-validation-for="EmailAddress" class="redColor"></span>
                                        </div>
                                        <div class="form-group mb3">
                                            <div class="posRel">
                                                <label for="" class="lblText">Password</label>
                                                <input type="password" asp-for="Password" class="form-control" placeholder="Password" tabindex="2" />
                                                <span asp-validation-for="Password"></span>
                                            </div>
                                        </div>
                                        <div class="fotPass">
                                            <a href="javascript:void(0)" onclick="ShowContent('@Url.Action("ForgotPassword", "Login")')" data-toggle="modal" data-target="#myModal">Forgot password</a>
                                        </div>
                                    </div>
                                    <div class="loginFooter">
                                        <button type="submit" id="btnLogin" class="btn btnLogin">Login</button>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mainFooter">
            <p>@Html.Raw(footerText)</p>
        </div>

    </form>
</body>
<script type="text/javascript">
    $("#btnLogin").on("click", function (e) {
        e.preventDefault();
        var password = $("#Password").val();
        var salt = $("#Salt").val();
        var hash = MD5(password);
        var hashedPwd = MD5(salt + hash);
        $("#Password").val(hashedPwd);

        $("#frmLogin").submit();
    });

    function ShowContent(url) {

        $.dialog({
            title: 'Forgot Password',
            content: 'url:' + url, columnClass: 'col-md-4 col-md-offset-4'
        });


    }
</script>

@if (TempData["alertMsg"] != null)
{
    <script type="text/javascript">
        showWarningMsg('@Html.Raw(TempData["alertMsg"])');
    </script>
}







